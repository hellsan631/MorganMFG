tinyMCEPopup.requireLangPack();var SearchReplaceDialog={init:function(){var a=this,b=document.forms[0],c=tinyMCEPopup.getWindowArg("mode");a.switchMode(c),b[c+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string"),b[c+"_panel_searchstring"].focus(),mcTabs.onChange.add(function(b){a.switchMode(b.substring(0,b.indexOf("_")))})},switchMode:function(a){var b,c=this.lastMode;c!=a&&(b=document.forms[0],c&&(b[a+"_panel_searchstring"].value=b[c+"_panel_searchstring"].value,b[a+"_panel_backwardsu"].checked=b[c+"_panel_backwardsu"].checked,b[a+"_panel_backwardsd"].checked=b[c+"_panel_backwardsd"].checked,b[a+"_panel_casesensitivebox"].checked=b[c+"_panel_casesensitivebox"].checked),mcTabs.displayTab(a+"_tab",a+"_panel"),document.getElementById("replaceBtn").style.display="replace"==a?"inline":"none",document.getElementById("replaceAllBtn").style.display="replace"==a?"inline":"none",this.lastMode=a)},searchNext:function(a){function b(){i=h.getRng().cloneRange(),g.getDoc().execCommand("SelectAll",!1,null),h.setRng(i)}function c(){g.selection.setContent(rs)}var d,e,f,g=tinyMCEPopup.editor,h=g.selection,i=h.getRng(),j=this.lastMode,k=0,l=g.getWin(),m=(g.windowManager,0);if(d=document.forms[0],e=d[j+"_panel_searchstring"].value,f=d[j+"_panel_backwardsu"].checked,ca=d[j+"_panel_casesensitivebox"].checked,rs=d.replace_panel_replacestring.value,tinymce.isIE&&(i=g.getDoc().selection.createRange()),""!=e){switch(ca&&(k=4|k),a){case"all":if(g.execCommand("SelectAll"),g.selection.collapse(!0),tinymce.isIE){for(g.focus(),i=g.getDoc().selection.createRange();i.findText(e,f?-1:1,k);)i.scrollIntoView(),i.select(),c(),m=1,f&&i.moveEnd("character",-rs.length);tinyMCEPopup.storeSelection()}else for(;l.find(e,ca,f,!1,!1,!1,!1);)c(),m=1;return void tinyMCEPopup.alert(g.getLang(m?"searchreplace_dlg.allreplaced":"searchreplace_dlg.notfound"));case"current":g.selection.isCollapsed()||c()}h.collapse(f),i=h.getRng(),e&&(tinymce.isIE?(g.focus(),i=g.getDoc().selection.createRange(),i.findText(e,f?-1:1,k)?(i.scrollIntoView(),i.select()):tinyMCEPopup.alert(g.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):l.find(e,ca,f,!1,!1,!1,!1)?b():tinyMCEPopup.alert(g.getLang("searchreplace_dlg.notfound")))}}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);