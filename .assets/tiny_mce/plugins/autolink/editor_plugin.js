!function(){tinymce.create("tinymce.plugins.AutolinkPlugin",{init:function(a){var b=this;a.onKeyDown.addToTop(function(a,c){return 13==c.keyCode?b.handleEnter(a):void 0}),tinyMCE.isIE||(a.onKeyPress.add(function(a,c){return 41==c.which?b.handleEclipse(a):void 0}),a.onKeyUp.add(function(a,c){return 32==c.keyCode?b.handleSpacebar(a):void 0}))},handleEclipse:function(a){this.parseCurrentLine(a,-1,"(",!0)},handleSpacebar:function(a){this.parseCurrentLine(a,0,"",!0)},handleEnter:function(a){this.parseCurrentLine(a,-1,"",!1)},parseCurrentLine:function(a,b,c){var d,e,f,g,h,i,j,k,l;if(d=a.selection.getRng(!0).cloneRange(),d.startOffset<5){if(k=d.endContainer.previousSibling,null==k){if(null==d.endContainer.firstChild||null==d.endContainer.firstChild.nextSibling)return;k=d.endContainer.firstChild.nextSibling}if(l=k.length,d.setStart(k,l),d.setEnd(k,l),d.endOffset<5)return;e=d.endOffset,g=k}else{if(g=d.endContainer,3!=g.nodeType&&g.firstChild){for(;3!=g.nodeType&&g.firstChild;)g=g.firstChild;3==g.nodeType&&(d.setStart(g,0),d.setEnd(g,g.nodeValue.length))}e=1==d.endOffset?2:d.endOffset-1-b}f=e;do d.setStart(g,e>=2?e-2:0),d.setEnd(g,e>=1?e-1:0),e-=1;while(" "!=d.toString()&&""!=d.toString()&&160!=d.toString().charCodeAt(0)&&e-2>=0&&d.toString()!=c);d.toString()==c||160==d.toString().charCodeAt(0)?(d.setStart(g,e),d.setEnd(g,f),e+=1):0==d.startOffset?(d.setStart(g,0),d.setEnd(g,f)):(d.setStart(g,e),d.setEnd(g,f));var i=d.toString();if("."==i.charAt(i.length-1)&&d.setEnd(g,f-1),i=d.toString(),j=i.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+-]+@)(.+)$/i),j&&("www."==j[1]?j[1]="http://www.":/@$/.test(j[1])&&!/^mailto:/.test(j[1])&&(j[1]="mailto:"+j[1]),h=a.selection.getBookmark(),a.selection.setRng(d),tinyMCE.execCommand("createlink",!1,j[1]+j[2]),a.selection.moveToBookmark(h),a.nodeChanged(),tinyMCE.isWebKit)){a.selection.collapse(!1);var m=Math.min(g.length,f+1);d.setStart(g,m),d.setEnd(g,m),a.selection.setRng(d)}},getInfo:function(){return{longname:"Autolink",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autolink",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("autolink",tinymce.plugins.AutolinkPlugin)}();
//# sourceMappingURL=editor_plugin.map