tinyMCEPopup.requireLangPack();var AnchorDialog={init:function(a){var b,c=document.forms[0];this.editor=a,b=a.dom.getParent(a.selection.getNode(),"A"),v=a.dom.getAttrib(b,"name")||a.dom.getAttrib(b,"id"),v&&(this.action="update",c.anchorName.value=v),c.insert.value=a.getLang(b?"update":"insert")},update:function(){var a,b,c=this.editor,d=document.forms[0].anchorName.value;if(!d||!/^[a-z][a-z0-9\-\_:\.]*$/i.test(d))return void tinyMCEPopup.alert("advanced_dlg.anchor_invalid");tinyMCEPopup.restoreSelection(),"update"!=this.action&&c.selection.collapse(1);var e=c.schema.getElementRule("a");if(b=!e||e.attributes.name?"name":"id",a=c.dom.getParent(c.selection.getNode(),"A"))a.setAttribute(b,d),a[b]=d,c.undoManager.add();else{var f={"class":"mceItemAnchor"};f[b]=d,c.execCommand("mceInsertContent",0,c.dom.createHTML("a",f,"ï»¿")),c.nodeChanged()}tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(AnchorDialog.init,AnchorDialog);