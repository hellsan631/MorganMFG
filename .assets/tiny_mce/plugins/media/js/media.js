!function(){function a(a){return document.getElementById(a)}function b(a){var c,d,e,f;if(null==a||"object"!=typeof a)return a;if("length"in a){for(e=[],c=0,d=a.length;d>c;++c)e[c]=b(a[c]);return e}e={};for(f in a)a.hasOwnProperty(f)&&(e[f]=b(a[f]));return e}function c(b){var c=a(b);return"SELECT"==c.nodeName?c.options[c.selectedIndex].value:"checkbox"==c.type?c.checked:c.value}function d(b,c,d){if("undefined"!=typeof c&&null!=c){var e=a(b);"SELECT"==e.nodeName?selectByValue(document.forms[0],b,c):"checkbox"==e.type?("string"==typeof c&&(c=c.toLowerCase(),c=!d&&"true"===c||d&&c===d.toLowerCase()),e.checked=!!c):e.value=c}}var e;(e=tinyMCEPopup.getParam("media_external_list_url"))&&document.write('<script language="javascript" type="text/javascript" src="'+tinyMCEPopup.editor.documentBaseURI.toAbsolute(e)+'"></script>'),window.Media={init:function(){var c,d,e=this;e.editor=d=tinyMCEPopup.editor,a("filebrowsercontainer").innerHTML=getBrowserHTML("filebrowser","src","media","media"),a("qtsrcfilebrowsercontainer").innerHTML=getBrowserHTML("qtsrcfilebrowser","quicktime_qtsrc","media","media"),a("bgcolor_pickcontainer").innerHTML=getColorPickerHTML("bgcolor_pick","bgcolor"),a("video_altsource1_filebrowser").innerHTML=getBrowserHTML("video_filebrowser_altsource1","video_altsource1","media","media"),a("video_altsource2_filebrowser").innerHTML=getBrowserHTML("video_filebrowser_altsource2","video_altsource2","media","media"),a("audio_altsource1_filebrowser").innerHTML=getBrowserHTML("audio_filebrowser_altsource1","audio_altsource1","media","media"),a("audio_altsource2_filebrowser").innerHTML=getBrowserHTML("audio_filebrowser_altsource2","audio_altsource2","media","media"),a("video_poster_filebrowser").innerHTML=getBrowserHTML("filebrowser_poster","video_poster","image","media"),c=e.getMediaListHTML("medialist","src","media","media"),""==c?a("linklistrow").style.display="none":a("linklistcontainer").innerHTML=c,isVisible("filebrowser")&&(a("src").style.width="230px"),isVisible("video_filebrowser_altsource1")&&(a("video_altsource1").style.width="220px"),isVisible("video_filebrowser_altsource2")&&(a("video_altsource2").style.width="220px"),isVisible("audio_filebrowser_altsource1")&&(a("audio_altsource1").style.width="220px"),isVisible("audio_filebrowser_altsource2")&&(a("audio_altsource2").style.width="220px"),isVisible("filebrowser_poster")&&(a("video_poster").style.width="220px"),d.dom.setOuterHTML(a("media_type"),e.getMediaTypeHTML(d)),e.setDefaultDialogSettings(d),e.data=b(tinyMCEPopup.getWindowArg("data")),e.dataToForm(),e.preview(),updateColor("bgcolor_pick","bgcolor")},insert:function(){var a=tinyMCEPopup.editor;this.formToData(),a.execCommand("mceRepaint"),tinyMCEPopup.restoreSelection(),a.selection.setNode(a.plugins.media.dataToImg(this.data)),tinyMCEPopup.close()},preview:function(){a("prev").innerHTML=this.editor.plugins.media.dataToHtml(this.data,!0)},moveStates:function(b,e){function f(a){var b={};return a&&tinymce.each(a.split("&"),function(a){var c=a.split("=");b[unescape(c[0])]=unescape(c[1])}),b}function g(a,e){var f,g,h,i,j;if(a==l.type||"global"==a)for(e=tinymce.explode(e),f=0;f<e.length;f++)g=e[f],h="global"==a?g:a+"_"+g,"global"==a?j=l:"video"==a||"audio"==a?(j=l.video.attrs,j||b||(l.video.attrs=j={})):j=l.params,j&&(b?d(h,j[g],"video"==a||"audio"==a?g:""):(delete j[g],i=c(h),"video"!=a&&"audio"!=a||i!==!0||(i=g),k[h]?i!==k[h]&&(i=""+i,j[g]=i):i&&(i=""+i,j[g]=i)))}var h,i,j,k,i,l=this.data,m=this.editor,n=m.plugins.media;k={quicktime_autoplay:!0,quicktime_controller:!0,flash_play:!0,flash_loop:!0,flash_menu:!0,windowsmedia_autostart:!0,windowsmedia_enablecontextmenu:!0,windowsmedia_invokeurls:!0,realmedia_autogotourl:!0,realmedia_imagestatus:!0},b||(l.type=a("media_type").options[a("media_type").selectedIndex].value,l.width=c("width"),l.height=c("height"),i=c("src"),"src"==e&&(h=i.replace(/^.*\.([^.]+)$/,"$1"),(j=n.getType(h))&&(l.type=j.name.toLowerCase()),d("media_type",l.type)),("video"==l.type||"audio"==l.type)&&(l.video.sources||(l.video.sources=[]),l.video.sources[0]={src:c("src")})),a("video_options").style.display="none",a("audio_options").style.display="none",a("flash_options").style.display="none",a("quicktime_options").style.display="none",a("shockwave_options").style.display="none",a("windowsmedia_options").style.display="none",a("realmedia_options").style.display="none",a("embeddedaudio_options").style.display="none",a(l.type+"_options")&&(a(l.type+"_options").style.display="block"),d("media_type",l.type),g("flash","play,loop,menu,swliveconnect,quality,scale,salign,wmode,base,flashvars"),g("quicktime","loop,autoplay,cache,controller,correction,enablejavascript,kioskmode,autohref,playeveryframe,targetcache,scale,starttime,endtime,target,qtsrcchokespeed,volume,qtsrc"),g("shockwave","sound,progress,autostart,swliveconnect,swvolume,swstretchstyle,swstretchhalign,swstretchvalign"),g("windowsmedia","autostart,enabled,enablecontextmenu,fullscreen,invokeurls,mute,stretchtofit,windowlessvideo,balance,baseurl,captioningid,currentmarker,currentposition,defaultframe,playcount,rate,uimode,volume"),g("realmedia","autostart,loop,autogotourl,center,imagestatus,maintainaspect,nojava,prefetch,shuffle,console,controls,numloop,scriptcallbacks"),g("video","poster,autoplay,loop,muted,preload,controls"),g("audio","autoplay,loop,preload,controls"),g("embeddedaudio","autoplay,loop,controls"),g("global","id,name,vspace,hspace,bgcolor,align,width,height"),b?"video"==l.type?(l.video.sources[0]&&d("src",l.video.sources[0].src),i=l.video.sources[1],i&&d("video_altsource1",i.src),i=l.video.sources[2],i&&d("video_altsource2",i.src)):"audio"==l.type?(l.video.sources[0]&&d("src",l.video.sources[0].src),i=l.video.sources[1],i&&d("audio_altsource1",i.src),i=l.video.sources[2],i&&d("audio_altsource2",i.src)):("flash"==l.type&&tinymce.each(m.getParam("flash_video_player_flashvars",{url:"$url",poster:"$poster"}),function(a,b){"$url"==a&&(l.params.src=f(l.params.flashvars)[b]||l.params.src||"")}),d("src",l.params.src)):(i=c("src"),i.match(/youtube\.com\/embed\/\w+/)?(l.width=425,l.height=350,l.params.frameborder="0",l.type="iframe",d("src",i),d("media_type",l.type)):(i.match(/youtu\.be\/[a-z1-9.-_]+/)&&(l.width=425,l.height=350,l.params.frameborder="0",l.type="iframe",i="http://www.youtube.com/embed/"+i.match(/youtu.be\/([a-z1-9.-_]+)/)[1],d("src",i),d("media_type",l.type)),i.match(/youtube\.com(.+)v=([^&]+)/)&&(l.width=425,l.height=350,l.params.frameborder="0",l.type="iframe",i="http://www.youtube.com/embed/"+i.match(/v=([^&]+)/)[1],d("src",i),d("media_type",l.type))),i.match(/video\.google\.com(.+)docid=([^&]+)/)&&(l.width=425,l.height=326,l.type="flash",i="http://video.google.com/googleplayer.swf?docId="+i.match(/docid=([^&]+)/)[1]+"&hl=en",d("src",i),d("media_type",l.type)),i.match(/vimeo\.com\/([0-9]+)/)&&(l.width=425,l.height=350,l.params.frameborder="0",l.type="iframe",i="http://player.vimeo.com/video/"+i.match(/vimeo.com\/([0-9]+)/)[1],d("src",i),d("media_type",l.type)),i.match(/stream\.cz\/((?!object).)*\/([0-9]+)/)&&(l.width=425,l.height=350,l.params.frameborder="0",l.type="iframe",i="http://www.stream.cz/object/"+i.match(/stream.cz\/[^/]+\/([0-9]+)/)[1],d("src",i),d("media_type",l.type)),i.match(/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/)&&(l.width=425,l.height=350,l.params.frameborder="0",l.type="iframe",i="http://maps.google.com/maps/ms?msid="+i.match(/msid=(.+)/)[1]+"&output=embed",d("src",i),d("media_type",l.type)),"video"==l.type?(l.video.sources||(l.video.sources=[]),l.video.sources[0]={src:i},i=c("video_altsource1"),i&&(l.video.sources[1]={src:i}),i=c("video_altsource2"),i&&(l.video.sources[2]={src:i})):"audio"==l.type?(l.video.sources||(l.video.sources=[]),l.video.sources[0]={src:i},i=c("audio_altsource1"),i&&(l.video.sources[1]={src:i}),i=c("audio_altsource2"),i&&(l.video.sources[2]={src:i})):l.params.src=i,d("width",l.width||("audio"==l.type?300:320)),d("height",l.height||("audio"==l.type?32:240)))},dataToForm:function(){this.moveStates(!0)},formToData:function(a){("width"==a||"height"==a)&&this.changeSize(a),"source"==a?(this.moveStates(!1,a),d("source",this.editor.plugins.media.dataToHtml(this.data)),this.panel="source"):("source"==this.panel&&(this.data=b(this.editor.plugins.media.htmlToData(c("source"))),this.dataToForm(),this.panel=""),this.moveStates(!1,a),this.preview())},beforeResize:function(){this.width=parseInt(c("width")||("audio"==this.data.type?"300":"320"),10),this.height=parseInt(c("height")||("audio"==this.data.type?"32":"240"),10)},changeSize:function(b){var e,f;a("constrain").checked&&(e=parseInt(c("width")||("audio"==this.data.type?"300":"320"),10),f=parseInt(c("height")||("audio"==this.data.type?"32":"240"),10),"width"==b?(this.height=Math.round(e/this.width*f),d("height",this.height)):(this.width=Math.round(f/this.height*e),d("width",this.width)))},getMediaListHTML:function(){if("undefined"!=typeof tinyMCEMediaList&&tinyMCEMediaList.length>0){var a="";a+='<select id="linklist" name="linklist" style="width: 250px" onchange="this.form.src.value=this.options[this.selectedIndex].value;Media.formToData(\'src\');">',a+='<option value="">---</option>';for(var b=0;b<tinyMCEMediaList.length;b++)a+='<option value="'+tinyMCEMediaList[b][1]+'">'+tinyMCEMediaList[b][0]+"</option>";return a+="</select>"}return""},getMediaTypeHTML:function(a){function b(b,c){return a.schema.getElementRule(c||b)?'<option value="'+b+'">'+tinyMCEPopup.editor.translate("media_dlg."+b)+"</option>":""}var c="";return c+='<select id="media_type" name="media_type" onchange="Media.formToData(\'type\');">',c+=b("video"),c+=b("audio"),c+=b("flash","object"),c+=b("quicktime","object"),c+=b("shockwave","object"),c+=b("windowsmedia","object"),c+=b("realmedia","object"),c+=b("iframe"),a.getParam("media_embedded_audio",!1)&&(c+=b("embeddedaudio","object")),c+="</select>"},setDefaultDialogSettings:function(a){var b=a.getParam("media_dialog_defaults",{});tinymce.each(b,function(a,b){d(b,a)})}},tinyMCEPopup.requireLangPack(),tinyMCEPopup.onInit.add(function(){Media.init()})}();
//# sourceMappingURL=media.map